<ng-container *ngIf="uiGroup">
  <div class="timetable">
    <div class="container-fluid">
      <div class="row pt-5 animated slideInRight">
        <ng-container *ngIf="largeModeEnabled">
          <div class="col-9 timetable-table-container">
            <ng-container *ngIf="true then table"></ng-container>
          </div>
          <div class="col-3">
            <ng-container *ngIf="largeModeEnabled then largeControllers"></ng-container>
            <ng-container *ngIf="largeModeEnabled then currentDay"></ng-container>
          </div>
        </ng-container>

        <ng-container *ngIf="!largeModeEnabled">
          <div class="col-12">
            <ng-container *ngIf="!largeModeEnabled then smallControllers"></ng-container>
          </div>
          <div class="col-12 timetable-table-container">
            <ng-container *ngIf="true then table"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #smallControllers>
  <table class="table table-hover table-dark timetable_table table-borderless">
    <thead>
    <tr>
      <th scope="col" class="text-center"></th>
    </tr>
    </thead>
    <tbody>
    <tr class="timetable__subjects">
      <td>

      </td>
    </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #currentDay>
  <div class="card timetable-card animated bounceInRight bounceInRight" *ngIf="visibleSubjectCardDetails">
    <div class="card-header text-center">Понедельник</div>
    <div class="timetable-card-img" [ngClass]="getClassForLessonType(selectedSubject.classLessonType)">
      {{selectedSubject.name}}
    </div>
    <div class="card-body">
      <div class="timetable-card-container">
        <div class="text-uppercase w-50">Время начала:</div>
        <div class="text-right w-50">{{selectedSubject.time}}</div>
        <div class="text-uppercase w-50">Преподаватель</div>
        <div class="text-right w-50">{{selectedSubject.teachers}}</div>
        <ng-container *ngIf="selectedSubject.classLessonType">
          <div class="text-uppercase w-50">Тип</div>
          <div class="text-right w-50">{{selectedSubject.classLessonType}}</div>
        </ng-container>
        <div class="text-uppercase w-50">Аудитория</div>
        <div class="text-right w-50">{{selectedSubject.classrooms}}</div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #largeControllers>
  <table class="table table-hover table-dark timetable_table table-borderless">
    <thead>
    <tr>
      <th scope="col" colspan="2" class="text-center">Функции</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <th class="text-lg-center">День недели:</th>
      <td class="text-center">
        <ttp-dropdown [dropdownItems]="weekdays"
                      [selectedItem]="selectedWeekDay"
                      (dropdownItemChange)="changeWeekday($event)">

        </ttp-dropdown>
      </td>
    </tr>
    <tr>
      <th class="text-lg-center">Тип занятий:</th>
      <td class="text-center">
        <ttp-dropdown [selectedItem]="selectedLessonType"
                      [dropdownItems]="lessonTypes"
                      (dropdownItemChange)="changeLessonType($event)">

        </ttp-dropdown>
      </td>
    </tr>
    <tr>
      <th class="text-lg-center">Время:</th>
      <td class="text-center">
        <ttp-dropdown [selectedItem]="selectedTime"
                      [dropdownItems]="times"
                      (dropdownItemChange)="changeTime($event)">

        </ttp-dropdown>
      </td>
    </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #table>
  <table class="table table-hover table-dark timetable_table table-borderless">
    <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col" class="text-center" *ngFor="let weekday of weekdays">{{weekday}}</th>
    </tr>
    </thead>
    <tbody>
    <tr class="timetable__subjects" *ngFor="let time of times">
      <th>{{time}}</th>
      <ng-container *ngFor="let weekday of weekdays">
        <td class="text-capitalize timetable__subjects__item"
            (click)="openSubjectDetails(getSubjectByTime(time, uiGroup.sortedSubjects[weekday]))"
            [ngClass]="getClassForLessonType(getSubjectByTime(time, uiGroup.sortedSubjects[weekday]).classLessonType)"
            *ngIf="getSubjectByTime(time, uiGroup.sortedSubjects[weekday])">
          {{getSubjectByTime(time, uiGroup.sortedSubjects[weekday]).name}}
        </td>
        <td class="timetable__subjects__item text-warning"
            *ngIf="!getSubjectByTime(time, uiGroup.sortedSubjects[weekday])">
          [Пусто]
        </td>
      </ng-container>
    </tr>
    </tbody>
  </table>
</ng-template>

<ttp-popup *ngIf="visibleSubjectPopupDetails"
           [visiblePopup]="visibleSubjectPopupDetails"
           [popupDetails]="popupDetails"
           (closePopupChange)="closeSubjectDetailsPopup($event)"
></ttp-popup>

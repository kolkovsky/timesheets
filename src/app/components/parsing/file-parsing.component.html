<div class="file-parsing" *ngIf="uploadedFiles">
  <ttp-shared-notification
    class="file-parsing__notification"
    [visible]="visibleNotification"
    text="Произошла ошибка во время загрузки  документа! Попробуйте позже"
    [animationType]="'fadeInDown'"
    (closeNotificationChange)="visibleNotification = false"
  >
  </ttp-shared-notification>
  <div class="file-parsing-container animated zoomIn">
    <div class="card bg-dark mb-3 admin-parsing-container-card">
      <div class="card-body">
        <div class="admin-parsing-container-text" *ngIf="!file">
          <h1 class="display-4 text-white text-center">
            Загрузите файл для расписания!
          </h1>
        </div>
        <div class="file-parsing-container-info animated fadeIn" *ngIf="file">
          <ttp-icon
            iconName="issue-closed"
            customFill="#0f804a"
            customClass="admin-parsing-container-info-icon"
          >
          </ttp-icon>
          <div class="file-parsing-container-info-text">
            Файл загружен, размер {{ fileSize }} kb
          </div>
        </div>
        <div class="file-parsing-container-buttons">
          <div class="custom-file">
            <input
              type="file"
              class="custom-file-input"
              id="inputGroupFile04"
              (select)="selectFile($event)"
              (change)="selectFile($event)"
            />
            <label class="custom-file-label" for="inputGroupFile04"
              >Выберите файл</label
            >
          </div>
          <button
            type="button"
            class="btn btn-danger btn-block mt-4"
            (click)="sendFile()"
            [disabled]="!file || showErrorUpload"
          >
            Загрузить
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<ttp-shared-popup
  [position]="'right'"
  [visiblePopup]="visibleAllUploadedFilesModal"
>
  <div class="file-parsing__popup-header">
    {{
      uploadedFiles?.length === 0
        ? "Здесь будут ваши все загруженные файлы"
        : "Загруженные файлы"
    }}
  </div>
  <div
    class="file-parsing__popup-files"
    [class.empty]="uploadedFiles?.length === 0"
  >
    <ng-container
      *ngTemplateOutlet="uploadedFiles?.length !== 0 ? fullFiles : emptyFiles"
    ></ng-container>
    <ng-template #fullFiles>
      <div
        class="file-parsing__popup-files-item"
        *ngFor="let item of uploadedFiles"
      >
        <ttp-icon
          iconName="x"
          customFill="white"
          customClass="file-parsing__popup-files-item-x"
          (click)="removeFile(item)"
        ></ttp-icon>
        <ttp-icon
          iconName="file"
          customFill="white"
          customClass="file-parsing__popup-files-item-icon"
          (click)="saveFile(item, item.name)"
        ></ttp-icon>

        <p class="file-parsing__popup-files-item-text">{{ item.name }}</p>
      </div>
    </ng-template>
    <ng-template #emptyFiles>
      <div class="file-parsing__popup-files-empty">
        <ttp-icon
          iconName="package"
          customFill="orange"
          customClass="file-parsing__popup-files-empty-icon"
        >
        </ttp-icon>
      </div>
    </ng-template>
  </div>
  <div class="file-parsing__popup-button">
    <button
      class="btn btn-outline-danger"
      (click)="closeAllUploadedFilesPopup()"
    >
      Закрыть
    </button>
  </div>
</ttp-shared-popup>
